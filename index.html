<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</title>

  <style>
    /* HappyHues Palette #16 ä¸»è¦è‰²ç³» */
    :root {
      --bg: #f7e9e3;
      --card-bg: #f4d4c3;
      --primary: #8b6d9c;
      --primary-dark: #4d4c7d;
      --input-bg: #ffffff;
      --result-bg: #f7e9e3;
      --text-dark: #4d4c7d;
      --text-light: #6e5a77;
    }

    body {
      font-family: "Noto Sans TC", sans-serif;
      background: var(--bg);
      padding: 40px;
      color: var(--text-dark);
    }

    .container {
      max-width: 420px;
      margin: auto;
      padding: 25px;
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 4px 18px rgba(0,0,0,0.08);
      backdrop-filter: blur(3px);
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: var(--primary-dark);
      letter-spacing: 1px;
    }

    label {
      margin-top: 12px;
      display: block;
      font-weight: 600;
      color: var(--primary-dark);
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border-radius: 10px;
      border: 1px solid #c69fa5;
      background: var(--input-bg);
      color: var(--text-dark);
      font-size: 15px;
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 18px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 17px;
      font-weight: 600;
      transition: 0.2s;
    }

    button:hover {
      background: var(--primary-dark);
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background: var(--result-bg);
      border-radius: 10px;
      border: 1px solid #c69fa5;
      display: none;
      color: var(--text-light);
      font-size: 16px;
      line-height: 1.6;
    }

    .source {
      margin-top: 20px;
      font-size: 13px;
      color: var(--text-light);
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</h1>

    <label for="birthDate">ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸï¼ˆè¥¿å…ƒï¼‰</label>
    <input type="date" id="birthDate">

    <label for="size">ç‹—ç‹—é«”å‹</label>
    <select id="size">
      <option value="small">å°å‹çŠ¬</option>
      <option value="medium">ä¸­å‹çŠ¬</option>
      <option value="large">å¤§å‹çŠ¬</option>
    </select>

    <button id="calcBtn">é–‹å§‹è¨ˆç®—</button>

    <div id="result" class="result"></div>

    <p class="source">
      åƒè€ƒä¾†æºï¼šç¾åœ‹çŠ¬æ¥­ä¿±æ¨‚éƒ¨ï¼ˆAKCï¼‰<br>
      https://www.akcpetinsurance.com/blog/year-of-the-dog
    </p>
  </div>

  <script>
    // ç‹—ç‹—å¹´é½¡æ›ç®—è¡¨
    const dogAgeMap = {
      small: [0,15,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80],
      medium: [0,15,24,28,32,36,42,47,51,56,60,65,69,74,78,83,87],
      large: [0,15,24,28,32,36,45,50,55,61,66,72,77,82,88,93,120]
    };

    // è¨ˆç®—ç‹—ç‹—å¯¦éš›å¹´é½¡ï¼ˆå«å°æ•¸ï¼‰
    function calculateDogAge(birthDate) {
      const today = new Date();
      const birth = new Date(birthDate);

      const diffMs = today - birth; 
      const days = diffMs / (1000 * 60 * 60 * 24);
      const age = days / 365.25;

      return age < 0 ? 0 : parseFloat(age.toFixed(1));
    }

    function showResult(age, humanAge) {
      const resultDiv = document.getElementById("result");
      resultDiv.style.display = "block";
      resultDiv.innerHTML = `
        <strong>ğŸ¶ ç‹—ç‹—å¯¦éš›å¹´é½¡ï¼š</strong> ${age} æ­²<br>
        <strong>ğŸ‘¨â€ğŸ¦³ æ›ç®—äººé¡å¹´é½¡ï¼š</strong> ${humanAge} æ­²
      `;
    }

    document.getElementById("calcBtn").addEventListener("click", function () {
      const birthDate = document.getElementById("birthDate").value;
      const size = document.getElementById("size").value;
      const resultDiv = document.getElementById("result");

      if (!birthDate) {
        resultDiv.style.display = "block";
        resultDiv.innerHTML = "è«‹å…ˆè¼¸å…¥ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸï¼";
        return;
      }

      const age = calculateDogAge(birthDate);
      const humanAgeTable = dogAgeMap[size];

      const baseAge = Math.floor(age);
      const nextAge = Math.min(baseAge + 1, 16);
      const baseHuman = humanAgeTable[baseAge];
      const nextHuman = humanAgeTable[nextAge];

      const fraction = age - baseAge;
      const humanAge = parseFloat((baseHuman + (nextHuman - baseHuman) * fraction).toFixed(1));

      showResult(age, humanAge);

      // ä¿å­˜åˆ° localStorage
      localStorage.setItem("dogBirthDate", birthDate);
      localStorage.setItem("dogSize", size);
      localStorage.setItem("dogAge", age);
      localStorage.setItem("humanAge", humanAge);
    });

    // è¼‰å…¥ä¸Šæ¬¡çµæœ
    window.addEventListener("load", function () {
      const savedBirth = localStorage.getItem("dogBirthDate");
      const savedSize = localStorage.getItem("dogSize");
      const savedDogAge = localStorage.getItem("dogAge");
      const savedHumanAge = localStorage.getItem("humanAge");

      if (savedBirth && savedSize && savedDogAge && savedHumanAge) {
        document.getElementById("birthDate").value = savedBirth;
        document.getElementById("size").value = savedSize;

        showResult(savedDogAge, savedHumanAge);
      }
    });
  </script>
</body>
</html>
