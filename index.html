<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</title>

  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      background: #f7f7f7;
      padding: 40px;
    }

    .container {
      max-width: 420px;
      margin: auto;
      padding: 25px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    label {
      margin-top: 12px;
      display: block;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 18px;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background: #357abd;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background: #eef6ff;
      border-radius: 8px;
      display: none;
    }

    .source {
      margin-top: 20px;
      font-size: 13px;
      color: #666;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</h1>

    <label for="birthDate">ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸï¼ˆè¥¿å…ƒï¼‰</label>
    <input type="date" id="birthDate">

    <label for="size">ç‹—ç‹—é«”å‹</label>
    <select id="size">
      <option value="small">å°å‹çŠ¬</option>
      <option value="medium">ä¸­å‹çŠ¬</option>
      <option value="large">å¤§å‹çŠ¬</option>
    </select>

    <button id="calcBtn">é–‹å§‹è¨ˆç®—</button>

    <div id="result" class="result"></div>

    <p class="source">
      åƒè€ƒä¾†æºï¼šç¾åœ‹çŠ¬æ¥­ä¿±æ¨‚éƒ¨ï¼ˆAKCï¼‰<br>
      https://www.akcpetinsurance.com/blog/year-of-the-dog
    </p>
  </div>

  <script>
    // ç‹—ç‹—å¹´é½¡æ›ç®—è¡¨
    const dogAgeMap = {
      small: [0,15,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80],
      medium: [0,15,24,28,32,36,42,47,51,56,60,65,69,74,78,83,87],
      large: [0,15,24,28,32,36,45,50,55,61,66,72,77,82,88,93,120]
    };

    // è¨ˆç®—ç‹—ç‹—å¯¦éš›å¹´é½¡
    function calculateDogAge(birthDate) {
      const today = new Date();
      const birth = new Date(birthDate);

      let age = today.getFullYear() - birth.getFullYear();
      const m = today.getMonth() - birth.getMonth();

      if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) {
        age--;
      }
      return age < 0 ? 0 : age;
    }

    // é¡¯ç¤ºçµæœï¼ˆä¹Ÿå¯ç”¨æ–¼è®€å– localStorage æ™‚ï¼‰
    function showResult(age, humanAge) {
      const resultDiv = document.getElementById("result");
      resultDiv.style.display = "block";
      resultDiv.innerHTML = `
        <strong>ğŸ¶ ç‹—ç‹—å¯¦éš›å¹´é½¡ï¼š</strong> ${age} æ­²<br>
        <strong>ğŸ‘¨â€ğŸ¦³ æ›ç®—äººé¡å¹´é½¡ï¼š</strong> ${humanAge} æ­²
      `;
    }

    // ä¸»ç¨‹å¼ - æŒ‰ä¸‹è¨ˆç®—
    document.getElementById("calcBtn").addEventListener("click", function () {
      const birthDate = document.getElementById("birthDate").value;
      const size = document.getElementById("size").value;
      const resultDiv = document.getElementById("result");

      if (!birthDate) {
        resultDiv.style.display = "block";
        resultDiv.innerHTML = "è«‹å…ˆè¼¸å…¥ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸï¼";
        return;
      }

      const age = calculateDogAge(birthDate);
      const humanAgeTable = dogAgeMap[size];
      const humanAge = age <= 16 ? humanAgeTable[age] : humanAgeTable[16];

      // é¡¯ç¤ºçµæœ
      showResult(age, humanAge);

      // â˜…â˜…â˜… æŠŠè³‡æ–™å­˜é€² localStorage â˜…â˜…â˜…
      localStorage.setItem("dogBirthDate", birthDate);
      localStorage.setItem("dogSize", size);
      localStorage.setItem("dogAge", age);
      localStorage.setItem("humanAge", humanAge);
    });

    // â˜…â˜…â˜… è¼‰å…¥é é¢æ™‚ï¼Œè‡ªå‹•å¸¶å…¥ä¸Šæ¬¡è¨˜éŒ„ â˜…â˜…â˜…
    window.addEventListener("load", function () {
      const savedBirth = localStorage.getItem("dogBirthDate");
      const savedSize = localStorage.getItem("dogSize");
      const savedDogAge = localStorage.getItem("dogAge");
      const savedHumanAge = localStorage.getItem("humanAge");

      if (savedBirth && savedSize && savedDogAge && savedHumanAge) {
        document.getElementById("birthDate").value = savedBirth;
        document.getElementById("size").value = savedSize;

        showResult(savedDogAge, savedHumanAge);
      }
    });
  </script>
</body>
</html>
